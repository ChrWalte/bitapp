apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: portfolio-ingress
spec:
  tls:
    - hosts:
        - localhost.com
      secretName: secret-tls
  defaultBackend:
    resource:
      apiGroup: localhost.com
      kind: Service
      name: portfolio-web
---
apiVersion: v1
kind: Secret
metadata:
  name: secret-tls
  namespace: default
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURFVENDQWZtZ0F3SUJBZ0lVS2lJVUVuQ0RhU21IQ3BGeWxXRHJOZlR6aG9Zd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0dERVdNQlFHQTFVRUF3d05iRzlqWVd4b2IzTjBMbU52YlRBZUZ3MHlNVEEyTURJeE56VTFNelZhRncweQpNakEyTURJeE56VTFNelZhTUJneEZqQVVCZ05WQkFNTURXeHZZMkZzYUc5emRDNWpiMjB3Z2dFaU1BMEdDU3FHClNJYjNEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUUNvQmlkYk12ekk2a05HZm03eWVBS1hWOXNiTXZacTBWcDAKbGxkNUhIREtCYjB6cDczekdyWG5mSVhNTXNib2ZQNXBKQnU2N2lmVVN6UjlFZnNHYzM5QkJ6SlIvTDYrcjZqVQpDbS9zTlJYMGFnWGQ4YWVwZDZNNTJMbFprSEs0UVBIbm1ZOG53UFJmZldWUEJWU2phUy8vdGdtQ3MwblVsNUo5ClBaVmdrTkl0Qm9nMll2ejMybXlMbDFsRnoxVnJ1NlY5ejRHbm5EY1ZtT05jL2xpbnpuMmpsRUMwcEdkT2tZZmoKTVJMb2ZMVHYxSG1mU3UzZnpVdnFaYXZSQ1lBM3k0d3l4aDJUbGFYMUd6L0dWem9aZnFvY2h1SmRRVjhFcVlSVApBSGtYbnhtS1hVU1U5ckdHQlhMaDRCbVJ0aVlEVlV1c3ViRlNLWkVOQzRWdFhuL3YzRHZyQWdNQkFBR2pVekJSCk1CMEdBMVVkRGdRV0JCUTBCM3BlNGczYWtzQ3JqWWNXY0xaWWs5cnBjekFmQmdOVkhTTUVHREFXZ0JRMEIzcGUKNGczYWtzQ3JqWWNXY0xaWWs5cnBjekFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQTBHQ1NxR1NJYjNEUUVCQ3dVQQpBNElCQVFCT1NOaFBGU2dicTI4a3dQZDRrMklsOTNreFFJbGpYcGtDdDhjWTN6U2pleWJXR2NGZVBWd0dnTHloCis5N2NpTWs5VmhlK0FqZThVTnhvYVNxRGo1WjZESG9aaUk0VVZKQ2dtZ1hNV0ZZREVtUW9tcWU4Mlp6eXFBbDQKQjlTbnlkOWttSnVEcVZyMVJrM3FHZlRaL1VHYlpkU09ZN1BMd2xRMWFCdkFYNzdkNUUrL1p0dlNBR1B4Z09aRwo0enZEM2dpRHhrN25OeGc1YUFybit1My8wWVpGdjVqcU9Na01yNWRPb0NwbDBEZFpKc0FkTzlHbFNKckFNeGx2Cit4UVN4d1Z6QnpDby9mZGJheDM0YWxrWXFqSW5qalFoWCsxMUdpV0pqV2ZIMVlYVkpOMXFPYWhiTkgrNmlFYWEKZzU5ZHFjR3NDNDhFd3ZaRkNsV2x0NEJaTlVVUgotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBcUFZbld6TDh5T3BEUm41dThuZ0NsMWZiR3pMMmF0RmFkSlpYZVJ4d3lnVzlNNmU5Cjh4cTE1M3lGekRMRzZIeithU1FidXU0bjFFczBmUkg3Qm5OL1FRY3lVZnkrdnErbzFBcHY3RFVWOUdvRjNmR24KcVhlak9kaTVXWkJ5dUVEeDU1bVBKOEQwWDMxbFR3VlVvMmt2LzdZSmdyTkoxSmVTZlQyVllKRFNMUWFJTm1MOAo5OXBzaTVkWlJjOVZhN3VsZmMrQnA1dzNGWmpqWFA1WXA4NTlvNVJBdEtSblRwR0g0ekVTNkh5MDc5UjVuMHJ0CjM4MUw2bVdyMFFtQU44dU1Nc1lkazVXbDlScy94bGM2R1g2cUhJYmlYVUZmQkttRVV3QjVGNThaaWwxRWxQYXgKaGdWeTRlQVprYlltQTFWTHJMbXhVaW1SRFF1RmJWNS83OXc3NndJREFRQUJBb0lCQVFDUWg0S1JBeUhIM1NKegpYOHdsaXkrSGFVNFNibHJpZFNTZXhyZUZlUDVYK0duUUpnalJOWGVsSUVxaTVFYU9zdjNRQ1B4RlpoZ2lsM0lWCjUwS0xRUXdFTHFHTlBxQUF2RzYzdmlhYUF1dllxdDVURkV3SkROejlwRHVESENwaDdaTm5pWUpIU3NXcDRkNGsKQTh6VEoyYmZTWUdTeUkvSWEzelplQUNtNk11eFo5a3pTTUZQUlhaQVpmRmR5WDIzR3UvZzB5cnQwc3pRZnpScgp4SEttS2RuSDFUL0FBWUxBTHc4QnViK0V6c2pzcGJ3WTN4aWVTbGE5Z3h6cm5FaWlBS0hHVDk5VGxFOERWeFNDCmp6enVFZWdVQXFUNWFtcG44MERhUU4wSC9kYys5WkpTUEc4dFQ4NmxuVUNBd283ejJlcUJWaDZ1RnF5SmhYZW4KL3oySklzOWhBb0dCQU5BaWVDVkNOQXIycDUwdW1zMGxZVTNMaS9WcHV2cGtZM0ZLazlKeEZybTZRcERjc09BdApGU2J3ZDJRTTFiUkpOWmRaeGhhYW1oS1I4MlNkNDRTYy8wNGFQK1BuSGVYSURaV2RFT2pPTlFBbHhraC8zQ0FhClBTK3V3SndCanVuNVZCMy9SY20xYW9UckpHSnM3WmxkMDlOVk1kYkZPZThJb29walpyTE1ZMVZiQW9HQkFNNnEKUDdKSkc0ODNmTFpVUU1GQlBibGZxZ0w0ajFmVERkbjE3Z3h4bUxWWmFka051ZzBkZlpBbWNRQVZack5jejFFVgpMREMyTDFQWk4zL3BUSHRiRzBjOTh5V3NHeXZtSVBoTmoxTHJIckhRNG51Y2QreW8za1BsWGVOOFFRWnU5YVVqCnBSbmpGNmhtYTJaSWlsWW1oWE42SjRNeUIzTFRDdm8wcnN0OUNDaXhBb0dBTFVwaTVKQ3NiSHBSN1BVNFFFM1QKQjYrMFMvbnU4dytuUi83WGZlS1g5R0JnbmM4NE9mLzFhMXpHVGlJdzJxTlhveENvOTBBN0tMRlR5bUJGSXhWYQp4TzhYV2d0dnlSR29TeGM3bDcxUGNUSEhIUDJkcytxaHg5OTZFRGlTbGIxb25ZSnYrRDJlNlQrVjBra3J4c1RSCkZGcWtscnlpSjY2MFYvTGJaU3J1cnFNQ2dZQWYvQ3QxaldrTmhsbnY0aVJQaEtobjYwMWx2bEI1R0RvWmxMMXUKQVpyUDNuSEtYUnlCY1NJQTBHSkcwQWtnRTJvbXMyOHVidFB1VnowR3QvWFZWYWxvSWtkaWVqdU9WTVNmaVdsNApQTmw0VGNydnRLeSszUGZoYkR0V3ZPRlhmSTdhS3lVZlY0MU95K010Wm1hNnBLV2MxTGdPend4bUVoR3QzYjk3CjBQTVZVUUtCZ0NoZktiejJaQXVkVDB5TENzdHdHeW1sbkJmSUpLbU0xdHpPb05WNmdsTm96UjFvdEJWdUZLalcKbkJNLzZmd3A0Zm5CNUdtRGdSdXQ3akZ6VFFwbFJuQTJRaUxtVnlQV1FoNi9Eeld5MXlYRmdwVFpnQ2p0RGhmcQorODBTYnB3TWJ4NHVLb3BXa0pZVzVDZHR0bWhrSEdVSUF6Yjc0OFhZcGlCU09LdmNLcWFCCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
type: kubernetes.io/tls
---
apiVersion: v1
kind: Service
metadata:
  name: portfolio-web
spec:
  type: LoadBalancer
  selector:
    app: portfolio-web
  ports:
  - name: https
    port: 443
    targetPort: 443
  - name: http
    port: 80
    targetPort: 80
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: portfolio-web
spec:
  replicas: 1
  selector:
    matchLabels:
      app: portfolio-web
  strategy:
    type: RollingUpdate
  template:
    metadata:
      labels:
        app: portfolio-web
    spec:
      containers:
      - name: portfolio-web
        image: chrwalte/portfolio_web:2.0.5
        ports:
        - containerPort: 80
